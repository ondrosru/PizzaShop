<div class="modal-block">
    <ng-template popup-host></ng-template>
</div>
<form>
    <div class="d-flex flex-rot mt-3">
        <div class="d-flex flex-column mr-5">
            <img *ngIf="!image" src="assets/images/noimage.png" class="pizzaImg rounded">
            <img *ngIf="image" [src]="image" class="pizzaImg rounded">
            <input style="display: none" #fileInput type="file" (change)="onFileSelected($event)">
            <button class="btn btn-success mt-1" type="button" (click)="fileInput.click()">Добавить изображение</button>
        </div>
        <div class="d-flex flex-column w-100">
            <mat-form-field appearance="fill" class="w-100">
                <mat-label>Название</mat-label>
                <input [(ngModel)]="pizza.name" name="pizzaName" matInput required>
            </mat-form-field>
            <mat-form-field appearance="fill" class="w-100">
                <mat-label>Описание</mat-label>
                <textarea [(ngModel)]="pizza.description" name="pizzaDescription" rows="8" matInput required></textarea>
            </mat-form-field>
        </div>
    </div>
    <div class="price">
        <div class="d-flex flex-row">
            <div class="ml-2">Маленький размер</div>
            <label class="switch">
                <input type="checkbox" [(ngModel)]="smallPizza" name="smallPizza">
                <span class="slider round"></span>
            </label>
        </div>
        <mat-card *ngIf="smallPizza" class="d-flex flex-column">
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Thin, sizes.Small).checked" name="ThinSmallChecked">Тонкий</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="ThinSmallPrice" [(ngModel)]="getPrice(thickness.Thin, sizes.Small).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="ThinSmallPrice" [(ngModel)]="getPrice(thickness.Thin, sizes.Small).cost">
                    </mat-form-field>
                </div>
            </div>
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Traditional, sizes.Small).checked" name="TraditionalSmallChecked">Тратиционный</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="ThinTraditionalPrice" [(ngModel)]="getPrice(thickness.Traditional, sizes.Small).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="ThinTraditionalPrice" [(ngModel)]="getPrice(thickness.Traditional, sizes.Small).cost">
                    </mat-form-field>
                </div>
            </div>
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Fat, sizes.Small).checked" name="FatSmallChecked">Толстый</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="FatSmallPrice" [(ngModel)]="getPrice(thickness.Fat, sizes.Small).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="FatSmallPrice" [(ngModel)]="getPrice(thickness.Fat, sizes.Small).cost">
                    </mat-form-field>
                </div>
            </div>
        </mat-card>
    </div>
    <div class="price mt-3">
        <div class="d-flex flex-row">
            <div class="ml-2">Средний размер</div>
            <label class="switch">
                <input type="checkbox" [(ngModel)]="mediumPizza" name="mediumPizza">
                <span class="slider round"></span>
            </label>
        </div>
        <mat-card *ngIf="mediumPizza" class="d-flex flex-column">
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Thin, sizes.Middle).checked" name="ThinMiddleChecked">Тонкий</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="ThinMiddlePrice" [(ngModel)]="getPrice(thickness.Thin, sizes.Middle).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="ThinMiddlePrice" [(ngModel)]="getPrice(thickness.Thin, sizes.Middle).cost">
                    </mat-form-field>
                </div>
            </div>
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Traditional, sizes.Middle).checked" name="TraditionalMiddleChecked">Тратиционный</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="TraditionalMiddlePrice" [(ngModel)]="getPrice(thickness.Traditional, sizes.Middle).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="TraditionalMiddlePrice" [(ngModel)]="getPrice(thickness.Traditional, sizes.Middle).cost">
                    </mat-form-field>
                </div>
            </div>
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Fat, sizes.Middle).checked" name="FatMiddleChecked">Толстый</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="FatMiddlePrice" [(ngModel)]="getPrice(thickness.Fat, sizes.Middle).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="FatMiddlePrice" [(ngModel)]="getPrice(thickness.Fat, sizes.Middle).cost">
                    </mat-form-field>
                </div>
            </div>
        </mat-card>
    </div>
    <div class="price mt-3">
        <div class="d-flex flex-row">
            <div class="ml-2">Большой размер</div>
            <label class="switch">
                <input type="checkbox" [(ngModel)]="bigPizza" name="bigPizza">
                <span class="slider round"></span>
            </label>
        </div>
        <mat-card *ngIf="bigPizza" class="d-flex flex-column">
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Thin, sizes.Big).checked" name="ThinBigChecked">Тонкий</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="ThinBigWeight" [(ngModel)]="getPrice(thickness.Thin, sizes.Big).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="ThinBigPrice" [(ngModel)]="getPrice(thickness.Thin, sizes.Big).cost">
                    </mat-form-field>
                </div>
            </div>
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Traditional, sizes.Big).checked" name="TraditionalBigChecked">Тратиционный</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="TraditionalBigWeight" [(ngModel)]="getPrice(thickness.Traditional, sizes.Big).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="TraditionalBigPrice" [(ngModel)]="getPrice(thickness.Traditional, sizes.Big).cost">
                    </mat-form-field>
                </div>
            </div>
            <div class="d-flex flex-row">
                <mat-checkbox class="w-25" [(ngModel)]="getPrice(thickness.Fat, sizes.Big).checked" name="FatBigChecked">Толстый</mat-checkbox>
                <div class="d-flex flex-row">
                    <mat-form-field appearance="fill" class="w-100 mr-3">
                        <mat-label>Вес(г.)</mat-label>
                        <input matInput name="FatBigWeight" [(ngModel)]="getPrice(thickness.Fat, sizes.Big).weight">
                    </mat-form-field>
                    <mat-form-field appearance="fill" class="w-100">
                        <mat-label>Цена</mat-label>
                        <input matInput name="FatBigPrice" [(ngModel)]="getPrice(thickness.Fat, sizes.Big).cost">
                    </mat-form-field>
                </div>
            </div>
        </mat-card>
    </div>
    <div class="w-100 d-flex flex-row mt-3">
        <div class="w-50 rounded-left">
            <div class="w-100 headerListIngredient border-right">Список ингредиентов</div>
            <div *ngFor="let ingredient of ingredietns" class="w-100 border btn" (click)="selectIngredient(ingredient.id)" >{{ingredient.name}}</div>
            <button class="btn w-100 btn-success" type="button" (click)="addIngredient()">Добавить ингредиент</button>
        </div>
        <div class="w-50 rounded-right">
            <div class="w-100 headerListIngredient">Выбранные ингредиенты</div>
            <div *ngFor="let ingredient of pizza.ingredients" class="w-100 border btn" (click)="deselectIngredient(ingredient.id)">{{ingredient.name}}</div>
        </div>
    </div>
    <mat-error *ngIf="error" class="w-100">Заполните название, описание и хотя бы одну цену. Добавтье ингредиенты.</mat-error>
    <div class="mt-5 d-flex flex-row">
        <button class="btn" type="submit" mat-raised-button color="primary" (click)="savePizza()">
            Сохранить
        </button>
        <button class="btn bg-danger ml-1" type="button" mat-raised-button color="primary"
            [routerLink]="[ '/admin/pizza-list' ]">
            Отменить
        </button>
    </div>
</form>
